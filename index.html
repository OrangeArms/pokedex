<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pokedex å®å¯æ¢¦å›¾é‰´ - æŸ¥çœ‹æ‰€æœ‰ä¸–ä»£çš„å®å¯æ¢¦ä¿¡æ¯">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#e53935">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Pokedex å®å¯æ¢¦å›¾é‰´</title>
    <link rel="stylesheet" href="style.css?v=4">
    <link rel="preconnect" href="https://pokeapi.co" crossorigin>
    <link rel="dns-prefetch" href="https://pokeapi.co">
    <link rel="preconnect" href="https://raw.githubusercontent.com" crossorigin>
    <link rel="dns-prefetch" href="https://raw.githubusercontent.com">
    <link rel="preload" href="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png" as="image">
    <link rel="icon" href="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Pokedex å®å¯æ¢¦å›¾é‰´</h1>
            <nav>
                <button id="theme-toggle">ğŸŒ™ å¤œé—´æ¨¡å¼</button>
                <button id="favorites-button">â¤ï¸ æˆ‘çš„æ”¶è—</button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="filter-section">
            <div class="generation-selector">
                <button class="gen-button active" data-gen="all">å…¨éƒ¨</button>
                <button class="gen-button" data-gen="1">ç¬¬ä¸€ä¸–ä»£</button>
                <button class="gen-button" data-gen="2">ç¬¬äºŒä¸–ä»£</button>
                <button class="gen-button" data-gen="3">ç¬¬ä¸‰ä¸–ä»£</button>
                <button class="gen-button" data-gen="4">ç¬¬å››ä¸–ä»£</button>
                <button class="gen-button" data-gen="5">ç¬¬äº”ä¸–ä»£</button>
                <button class="gen-button" data-gen="6">ç¬¬å…­ä¸–ä»£</button>
                <button class="gen-button" data-gen="7">ç¬¬ä¸ƒä¸–ä»£</button>
                <button class="gen-button" data-gen="8">ç¬¬å…«ä¸–ä»£</button>
                <button class="gen-button" data-gen="9">ç¬¬ä¹ä¸–ä»£</button>
            </div>
            
            <div class="search-container">
                <input type="text" id="search-input" placeholder="æœç´¢å®å¯æ¢¦åç§°ã€IDæˆ–å±æ€§...">
                <button id="search-button">æœç´¢</button>
            </div>
            
            <div class="type-filter">
                <span>æŒ‰å±æ€§ç­›é€‰ï¼š</span>
                <div class="type-buttons">
                    <button class="type-button type-normal" data-type="normal">ä¸€èˆ¬</button>
                    <button class="type-button type-fire" data-type="fire">ç«</button>
                    <button class="type-button type-water" data-type="water">æ°´</button>
                    <button class="type-button type-grass" data-type="grass">è‰</button>
                    <button class="type-button type-electric" data-type="electric">ç”µ</button>
                    <button class="type-button type-ice" data-type="ice">å†°</button>
                    <button class="type-button type-fighting" data-type="fighting">æ ¼æ–—</button>
                    <button class="type-button type-poison" data-type="poison">æ¯’</button>
                    <button class="type-button type-ground" data-type="ground">åœ°é¢</button>
                    <button class="type-button type-flying" data-type="flying">é£è¡Œ</button>
                    <button class="type-button type-psychic" data-type="psychic">è¶…èƒ½åŠ›</button>
                    <button class="type-button type-bug" data-type="bug">è™«</button>
                    <button class="type-button type-rock" data-type="rock">å²©çŸ³</button>
                    <button class="type-button type-ghost" data-type="ghost">å¹½çµ</button>
                    <button class="type-button type-dragon" data-type="dragon">é¾™</button>
                    <button class="type-button type-dark" data-type="dark">æ¶</button>
                    <button class="type-button type-steel" data-type="steel">é’¢</button>
                    <button class="type-button type-fairy" data-type="fairy">å¦–ç²¾</button>
                </div>
            </div>
        </div>
        
        <div id="pokemon-container" class="pokemon-container"></div>
        
        <div class="pagination">
            <button id="first-page-button">é¦–é¡µ</button>
            <button id="prev-button" disabled>ä¸Šä¸€é¡µ</button>
            <div class="page-info">
                ç¬¬ <span id="current-page">1</span> / <span id="total-pages">?</span> é¡µ
            </div>
            <button id="next-button">ä¸‹ä¸€é¡µ</button>
            <button id="last-page-button">æœ«é¡µ</button>
            <div class="page-jump">
                <input type="number" id="page-input" min="1" placeholder="è·³è½¬">
                <button id="jump-button">GO</button>
            </div>
        </div>
    </div>
    
    <div id="pokemon-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="pokemon-details"></div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>æ•°æ®æ¥æºï¼š<a href="https://pokeapi.co/" target="_blank">PokeAPI</a></p>
            <p>Â© 2025 Pokedex å®å¯æ¢¦å›¾é‰´ | <a href="https://github.com/OrangeArms/pokedex" target="_blank">GitHub</a></p>
        </div>
    </footer>
    
    <script src="script.js?v=5"></script>
    <script>
        // æ³¨å†Œ Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker æ³¨å†ŒæˆåŠŸï¼Œä½œç”¨åŸŸä¸ºï¼š', registration.scope);
                    })
                    .catch(error => {
                        console.log('Service Worker æ³¨å†Œå¤±è´¥ï¼š', error);
                    });
            });
        }

        // æ·»åŠ ç¦»çº¿çŠ¶æ€æ£€æµ‹
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);

        function updateOnlineStatus() {
            const statusElement = document.createElement('div');
            statusElement.className = 'network-status';
            
            if (navigator.onLine) {
                statusElement.textContent = 'ç½‘ç»œå·²è¿æ¥';
                statusElement.classList.add('online');
                setTimeout(() => {
                    statusElement.remove();
                }, 3000);
            } else {
                statusElement.textContent = 'ç¦»çº¿æ¨¡å¼ - éƒ¨åˆ†åŠŸèƒ½å¯èƒ½ä¸å¯ç”¨';
                statusElement.classList.add('offline');
            }
            
            document.body.appendChild(statusElement);
            
            if (!navigator.onLine) {
                setTimeout(() => {
                    statusElement.classList.add('minimized');
                }, 5000);
            }
        }

        // æ£€æŸ¥æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬çš„ Service Worker
        let newWorker;
        let refreshing;

        // é¿å…é¡µé¢åˆ·æ–°æ­»å¾ªç¯
        if (navigator.serviceWorker) {
            navigator.serviceWorker.addEventListener('controllerchange', function() {
                if (refreshing) return;
                refreshing = true;
                window.location.reload();
            });
        }
    </script>
</body>
</html>
